<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß† NeuroRAG - Mental Health AI Assistant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <span class="logo-icon">üß†</span>
            <h2>NeuroRAG</h2>
        </div>
        
        <div class="quick-links">
            <h3>Menu</h3>
            <div class="link-item active" onclick="showSection('dashboard')">
                <span class="icon">üè†</span>
                <span>Dashboard</span>
            </div>
            <div class="link-item" onclick="showSection('database')">
                <span class="icon">üìä</span>
                <span>Database</span>
            </div>
        </div>
        
        <div style="margin-top: auto; padding: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
            <p style="font-size: 0.75rem; opacity: 0.7; text-align: center;">
                v1.0.0<br>
                ICD-10 Mental Health<br>
                AI Assistant
            </p>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Grid Background -->
        <div class="grid-background"></div>
        
        <!-- Header -->
        <header class="header">
            <div class="welcome">
                <span class="icon">üëã</span>
                <h1>Welcome to NeuroRAG</h1>
            </div>
            <div class="status-badge" id="statusBadge">
                <span class="dot"></span>
                <span>System Online</span>
            </div>
        </header>

        <!-- Dashboard Section -->
        <div id="dashboardSection" class="content-section">
            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
            <!-- Search Card -->
            <div class="card search-card">
                <h2>üîç Ask a Question</h2>
                <p class="subtitle">Search for ICD-10 mental health diagnoses and codes using natural language</p>
                
                <div class="search-box">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="e.g., What is the code for Recurrent depressive disorder in remission?"
                        onkeypress="handleKeyPress(event)"
                        autocomplete="off"
                    >
                    <button id="searchBtn" onclick="performSearch()">
                        <span id="searchBtnText">Search</span>
                        <span id="searchLoader" class="loader" style="display: none;"></span>
                    </button>
                </div>

                <div class="recent-searches">
                    <h4>üí° Quick Examples:</h4>
                    <div class="suggestion-chips">
                        <span class="chip" onclick="setQuery('What is the code for Recurrent depressive disorder in remission?')">
                            Recurrent depressive disorder
                        </span>
                        <span class="chip" onclick="setQuery('What are the diagnostic criteria for Obsessive-Compulsive Disorder?')">
                            OCD criteria
                        </span>
                        <span class="chip" onclick="setQuery('Tell me about bipolar disorder')">
                            Bipolar disorder
                        </span>
                        <span class="chip" onclick="setQuery('What is schizophrenia?')">
                            Schizophrenia
                        </span>
                        <span class="chip" onclick="setQuery('Anxiety disorders classification')">
                            Anxiety disorders
                        </span>
                        <span class="chip" onclick="setQuery('PTSD diagnosis')">
                            PTSD diagnosis
                        </span>
                    </div>
                </div>
            </div>

            <!-- Stats Row -->
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-icon-wrapper blue">
                        <svg class="stat-icon-svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <h3>Vector Store</h3>
                        <div class="stat-value" id="vectorStatus">Loading...</div>
                        <div class="stat-label">FAISS Index Status</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon-wrapper green">
                        <svg class="stat-icon-svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <h3>Documents</h3>
                        <div class="stat-value">ICD-10</div>
                        <div class="stat-label">Chapter V - Mental Health</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon-wrapper purple">
                        <svg class="stat-icon-svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <h3>AI Model</h3>
                        <div class="stat-value">Falcon-1B</div>
                        <div class="stat-label">LLM + Embeddings</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon-wrapper orange">
                        <svg class="stat-icon-svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <h3>Response Time</h3>
                        <div class="stat-value">&lt;2s</div>
                        <div class="stat-label">Fast Mode Active</div>
                    </div>
                </div>
            </div>

            <!-- Results Card (Hidden by default) -->
            <div class="card results-card" id="resultsCard" style="display: none;">
                <div class="results-header">
                    <h2>üí° Results</h2>
                    <button class="clear-btn" onclick="clearResults()">‚úï Clear</button>
                </div>
                <div class="results-content" id="resultsContent">
                    <!-- Results will be dynamically inserted here -->
                </div>
            </div>

            <!-- Simplified Info Card -->
            <div class="card info-card">
                <h3>ÔøΩ About This Tool</h3>
                <p style="color: var(--text-secondary); line-height: 1.6;">
                    AI-powered assistant for ICD-10 mental health codes and diagnostic criteria. 
                    Ask questions in natural language and get instant, accurate answers.
                </p>
                
                <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-light); border-radius: 8px; border-left: 3px solid var(--accent-green);">
                    <p style="margin: 0; color: var(--text-secondary); font-size: 0.875rem;">
                        <strong style="color: var(--primary-green);">100% Private</strong> ‚Ä¢ All data processed locally<br>
                        <strong style="color: var(--primary-green);">Lightning Fast</strong> ‚Ä¢ Instant semantic search<br>
                        <strong style="color: var(--primary-green);">Accurate</strong> ‚Ä¢ Official ICD-10 Chapter V data
                    </p>
                </div>
            </div>
        </div>

        <!-- Database Section -->
        <div id="databaseSection" class="content-section" style="display: none;">
            <div class="dashboard-grid">
                <div class="card" style="grid-column: 1 / -1;">
                    <h2 style="color: var(--primary-green); margin-bottom: 1.5rem;">ICD-10 Database</h2>
                    <div class="database-controls">
                        <input type="text" id="dbSearch" placeholder="Search database..." style="flex: 1; padding: 0.75rem 1rem; border: 2px solid var(--border-color); border-radius: 8px; font-size: 0.95rem;">
                        <button onclick="loadDatabase()" style="padding: 0.75rem 1.5rem; background: var(--accent-green); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Load Data</button>
                    </div>
                    <div id="databaseContent" class="database-content">
                        <p style="text-align: center; color: var(--text-secondary); padding: 3rem;">
                            Click "Load Data" to view the ICD-10 Mental Health database contents
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>
                Built by <strong>Gaurav Patil</strong> ‚Ä¢ 
                <a href="https://github.com/GauravPatil2515/NEURO-RAG" 
                   target="_blank" 
                   style="color: var(--accent-green); text-decoration: none;">
                    GitHub
                </a>
            </p>
        </footer>
    </main>

    <!-- Load JavaScript -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
